<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" type="text/css" href="./CSS/quiz.css">
  <title>Teste de Personalidade</title>
</head>

<body>
  <nav class="navBar">
    <li>
      <ol><a href="./index.html" style="text-decoration: none; color: #ffff; background-color: #f9a629;"><b>Home</b></a></ol>
    </li>
    <li>
      <ol><button onclick="Sair()" style="text-decoration: none; color: #ffff; background-color: #f9a629; border: none; cursor: pointer;"><b>Sair/Logout</b></button></ol>
    </li>
  </nav>

  <h1 class="quizTitle" style="color: #fff;">Teste de Personalidade Naruto</h1><br>
  <div id="quiz">
    <h2 class="quizTitle">Responda às perguntas abaixo:</h2>

    <form id="quiz-form" action="#result">
      <label>
        Pergunta 1: Como você lida com desafios?<br>
        <select name="q1" class="selects">
          <option value="">Selecione uma opção</option>
          <option value="garra">Tenho uma atitude determinada e não desisto facilmente.</option>
          <option value="esforco">Trabalho duro e me esforço ao máximo.</option>
          <option value="foco">Concentro-me em alcançar meus objetivos.</option>
        </select>
      </label>
      <br>
      <label>
        Pergunta 2: Como você se relaciona com os outros?<br>
      </label>
      </label>
      <select name="q2" class="selects">
        <option value="">Selecione uma opção</option>
        <option value="inteligencia">Prefiro interagir de forma intelectual e discutir ideias e conhecimento.</option>
        <option value="raciocinio">Gosto de analisar racionalmente as situações e tomar decisões lógicas.</option>
        <option value="apaixonada">Sou muito atencioso(a) e expresso meus sentimentos de forma clara.</option>
      </select>
      </label>
      <br>
      <label>
        Pergunta 3: Como você se sente em relação a assumir responsabilidades?<br>
        <select name="q3" class="selects">
          <option value="">Selecione uma opção</option>
          <option value="responsabilidade">Levo minhas responsabilidades a sério e cumpro meus compromissos.</option>
          <option value="moderacao">Busco um equilíbrio entre minhas responsabilidades e meu lazer.</option>
          <option value="generosidade">Gosto de ajudar os outros e assumir responsabilidades compartilhadas.</option>
        </select>
      </label>
      <br>
      <label>
        Pergunta 4: Como você busca alcançar seus objetivos?<br>
        <select name="q4" class="selects">
          <option value="">Selecione uma opção</option>
          <option value="garra">Sou determinado(a) e focado(a) em alcançar meus objetivos.</option>
          <option value="esforco">Trabalho duro e me esforço ao máximo para alcançar meus objetivos.</option>
          <option value="foco">Concentro-me em aprimorar minhas habilidades e alcançar meu máximo potencial.</option>
        </select>
      </label>
      <br>
      <label>
        Pergunta 5: Como você reage diante de situações de estresse?<br>
        <select name="q5" class="selects">
          <option value="">Selecione uma opção</option>
          <option value="raciocinio">Mantenho a calma e busco soluções racionais para resolver o problema.</option>
          <option value="moderacao">Procuro manter um equilíbrio emocional e encontrar formas saudáveis de lidar com o
            estresse.</option>
          <option value="generosidade">Busco apoio e conforto em outras pessoas, valorizando a conexão emocional.
          </option>
        </select>
      </label>
      <br>
      <label>
        Pergunta 6: Como você costuma lidar com suas próprias falhas e erros?<br>
        <select name="q6" class="selects">
          <option value="">Selecione uma opção</option>
          <option value="autoestima">Procuro aprender com meus erros e me aceitar com minhas falhas.</option>
          <option value="foco">Foco em superar meus erros e alcançar a melhor versão de mim.</option>
          <option value="garra">Encaro meus erros como uma oportunidade de crescimento e persisto em melhorar.</option>
        </select>
      </label>
      <br>
      <label>
        Pergunta 7: Como você expressa suas emoções?<br>
        <select name="q7" class="selects">
          <option value="">Selecione uma opção</option>
          <option value="apaixonada">Expresso minhas emoções de forma aberta e autêntica.</option>
          <option value="inteligencia">Prefiro expressar minhas emoções por meio da comunicação verbal e racional.
          </option>
          <option value="moderacao">Procuro equilibrar minhas emoções e expressá-las de forma controlada.</option>
        </select>
      </label>
      <br>
      <label>
        Pergunta 8: Como você costuma ajudar os outros?<br>
        <select name="q8" id="q8" class="selects">
          <option value="">Selecione uma opção</option>
          <option value="apaixonada">Demonstro afeto e apoio emocional.</option>
          <option value="inteligencia">Ofereço conselhos e soluções práticas.</option>
          <option value="generosidade">Disponibilizo meu tempo e recursos para ajudar.</option>
        </select>
      </label>
      <br>
      <label>
        Pergunta 9: Como você lida com situações desafiadoras em sua vida pessoal?<br>
        <select name="q10" id="q10" class="selects">
          <option value="">Selecione uma opção</option>
          <option value="autoestima">Busco me fortalecer internamente para enfrentar os desafios com coragem.</option>
          <option value="autoestima">Cultivo minha confiança interior para enfrentar de frente as situações
            desafiadoras.</option>
          <option value="responsabilidade">Assumo a responsabilidade de enfrentar as situações desafiadoras de forma
            determinada.</option>
          <option value="responsabilidade">Encaro as situações desafiadoras com resiliência, buscando superá-las
            gradualmente.</option>
        </select>
      </label>

      <br>
      <label>
        Pergunta 10: Qual é a sua abordagem ao lidar com desafios?<br>
        <select name="q10" id="q10" class="selects">
          <option value="">Selecione uma opção</option>
          <option value="apaixonada">Abordo os desafios com paixão e entusiasmo.</option>
          <option value="raciocinio">Utilizo o raciocínio lógico para enfrentar os desafios.</option>
          <option value="esforco">Dedico esforço e perseverança para superar os desafios.</option>
        </select>
      </label>
      <br>


      <button type="button" onclick="submitQuiz()" style="background-color: aqua;">Descobrir resultado</button>
    </form>

    <p id="result"></p>
  </div>

  <script src="./js/quiz.js"></script>
  <div class="graficoP">
    <canvas id="graficoPersonagem"> </canvas>

  </div>

</body>

</html>
<script>

  var nome = sessionStorage.getItem("NOME_USUARIO");
  var personagem = sessionStorage.getItem("nomePersonagem");
  console.log(nome);
  // sessionStorage.clear()

  function Sair(){
      sessionStorage.clear()
      window.location.href = "./login.html"

  }

  function plotarGrafico(resposta, idPersonagem) {}

console.log('iniciando plotagem do gráfico...');

// Criando estrutura para plotar gráfico - labels
let labels = [];

// Criando estrutura para plotar gráfico - dados

const graficoPersonagem = document.getElementById('graficoPersonagem');

new Chart(graficoPersonagem,{
  type: 'bar',
  data: data,
  labels:labels,
  options: {
    scales: {
      y: {
        beginAtZero: true
      }
    }
  },
});

// console.log('----------------------------------------------')
// console.log('Estes dados foram recebidos pela funcao "obterDadosGrafico" e passados para "plotarGrafico":')
// console.log(resposta)

// // Inserindo valores recebidos em estrutura para plotar o gráfico
// for (i = 0; i < resposta.length; i++) {
//     var registro = resposta[i];
//     labels.push(registro.nome);
//     dados.datasets[0].data.push(registro.porcentagem);
// }

// console.log('----------------------------------------------')
// console.log('O gráfico será plotado com os respectivos valores:')
// console.log('Labels:')
// console.log(labels)
// console.log('Dados:')
// console.log(dados.datasets)
// console.log('----------------------------------------------')

// // Criando estrutura para plotar gráfico - config
// const config = {
//     type: 'line',
//     data: dados,
// };

// // Adicionando gráfico criado em div na tela
// let myChart = new Chart(
//     document.getElementById(`graficoPersonagem${idPersonagem}`),
//     config
// );

// setTimeout(() => atualizarGrafico(idPersonagem, dados, myChart), 2000);
// }


// // Esta função *atualizarGrafico* atualiza o gráfico que foi renderizado na página,
// // buscando a última medida inserida em tabela contendo as capturas, 

// //     Se quiser alterar a busca, ajuste as regras de negócio em src/controllers
// //     Para ajustar o "select", ajuste o comando sql em src/models
// function atualizarGrafico(idPersonagem, dados, myChart) {



// fetch(`/medidas/tempo-real/${idPersonagem}`, { cache: 'no-store' }).then(function (response) {
//     if (response.ok) {
//         response.json().then(function (novoRegistro) {

//             obterdados(idPersonagem);
//             // alertar(novoRegistro, idPersonagem);
//             console.log(`Dados recebidos: ${JSON.stringify(novoRegistro)}`);
//             console.log(`Dados atuais do gráfico:`);
//             console.log(dados);

//             let avisoCaptura = document.getElementById(`avisoCaptura${idPersonagem}`)
//             avisoCaptura.innerHTML = ""


//             if (novoRegistro[0].momento_grafico == dados.labels[dados.labels.length - 1]) {
//                 console.log("---------------------------------------------------------------")
//                 console.log("Como não há dados novos para captura, o gráfico não atualizará.")
//                 avisoCaptura.innerHTML = "<i class='fa-solid fa-triangle-exclamation'></i> Foi trazido o dado mais atual capturado pelo sensor. <br> Como não há dados novos a exibir, o gráfico não atualizará."
//                 console.log("Horário do novo dado capturado:")
//                 console.log(novoRegistro[0].momento_grafico)
//                 console.log("Horário do último dado capturado:")
//                 console.log(dados.labels[dados.labels.length - 1])
//                 console.log("---------------------------------------------------------------")
//             } else {
//                 // tirando e colocando valores no gráfico
//                 dados.labels.shift(); // apagar o primeiro
//                 dados.labels.push(novoRegistro[0].momento_grafico); // incluir um novo momento

//                 dados.datasets[0].data.shift();  // apagar o primeiro de umidade
//                 dados.datasets[0].data.push(novoRegistro[0].umidade); // incluir uma nova medida de umidade

//                 dados.datasets[1].data.shift();  // apagar o primeiro de temperatura
//                 dados.datasets[1].data.push(novoRegistro[0].temperatura); // incluir uma nova medida de temperatura

//                 myChart.update();
//             }

//             // Altere aqui o valor em ms se quiser que o gráfico atualize mais rápido ou mais devagar
//             proximaAtualizacao = setTimeout(() => atualizarGrafico(idPersonagem, dados, myChart), 2000);
//         });
//     } else {
//         console.error('Nenhum dado encontrado ou erro na API');
//         // Altere aqui o valor em ms se quiser que o gráfico atualize mais rápido ou mais devagar
//         proximaAtualizacao = setTimeout(() => atualizarGrafico(idPersonagem, dados, myChart), 2000);
//     }
// })
//     .catch(function (error) {
//         console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
//     });

// }
// fetch("/personagem/atualizar", {
//                 method: "PUT",
//                 headers: {
//                     "Content-Type": "application/json"
//                 },
//                 body: JSON.stringify({
//                     idServer:id,
//                     character: personagem,
//                     user : nome,
                 

//                 })

</script>